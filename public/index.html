<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Social Deduction Game</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LANDING SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-landing" class="screen active">
    <div class="landing-hero">
      <div class="castle-icon" id="landing-icon">ğŸ°</div>
      <h1 class="title-main" id="landing-title">THE<br>TRAITORS</h1>
      <p class="subtitle" id="landing-subtitle">Who among you can be trusted?</p>
    </div>
    <div class="landing-buttons">
      <button class="btn btn-primary btn-large" id="btn-show-create">Host a Game</button>
      <button class="btn btn-secondary btn-large" id="btn-show-join">Join a Game</button>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       CREATE GAME SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-create" class="screen">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-create">â† Back</button>
      <h2>Host a Game</h2>
    </div>
    <div class="form-container">
      <div class="form-group">
        <label for="host-name">Your Name</label>
        <input type="text" id="host-name" placeholder="Enter your name" maxlength="20" autocomplete="off" />
      </div>
      <div class="form-group">
        <label for="num-traitors">Number of Traitors</label>
        <div class="traitor-picker">
          <button class="btn-stepper" id="btn-traitors-down">âˆ’</button>
          <span id="traitor-count-display">3</span>
          <button class="btn-stepper" id="btn-traitors-up">+</button>
        </div>
        <p class="hint">Recommended: 2â€“3 for 6â€“10 players, 3â€“4 for 11â€“20</p>
      </div>
      <div class="form-group">
        <label>Game Theme</label>
        <div class="theme-picker" id="theme-picker">
          <button class="theme-btn" data-theme="werewolf">
            <span class="theme-btn-icon">ğŸº</span>
            <span class="theme-btn-name">Werewolves</span>
          </button>
          <button class="theme-btn" data-theme="mole">
            <span class="theme-btn-icon">ğŸ•µï¸</span>
            <span class="theme-btn-name">The Mole</span>
          </button>
          <button class="theme-btn" data-theme="cowboys">
            <span class="theme-btn-icon">ğŸ¤ </span>
            <span class="theme-btn-name">Cowboys</span>
          </button>
          <button class="theme-btn active" data-theme="queer">
            <span class="theme-btn-icon">ğŸ³ï¸â€ğŸŒˆ</span>
            <span class="theme-btn-name">The Gays</span>
          </button>
          <button class="theme-btn" data-theme="traitors">
            <span class="theme-btn-icon">ğŸ°</span>
            <span class="theme-btn-name">The Traitors</span>
          </button>
        </div>
      </div>
      <button class="btn btn-primary btn-large" id="btn-create-game">Create Game</button>
      <p class="error-msg" id="create-error"></p>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       JOIN GAME SCREEN
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-join" class="screen">
    <div class="screen-header">
      <button class="btn-back" id="btn-back-join">â† Back</button>
      <h2>Join a Game</h2>
    </div>
    <div class="form-container">
      <div class="form-group">
        <label for="join-name">Your Name</label>
        <input type="text" id="join-name" placeholder="Enter your name" maxlength="20" autocomplete="off" />
      </div>
      <div class="form-group">
        <label for="join-code">Game Code</label>
        <input type="text" id="join-code" placeholder="4-letter code" maxlength="4"
               autocomplete="off" autocapitalize="characters" style="text-transform:uppercase;font-size:2rem;letter-spacing:0.3em;text-align:center;" />
      </div>
      <button class="btn btn-primary btn-large" id="btn-join-game">Join Game</button>
      <p class="error-msg" id="join-error"></p>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN GAME SCREEN â€” all phases render here
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="screen-game" class="screen">

    <!-- Top bar -->
    <div class="top-bar" id="top-bar">
      <div class="top-bar-left">
        <span class="game-code-label">GAME: <strong id="top-game-code">----</strong></span>
      </div>
      <div class="top-bar-right">
        <span id="top-player-name"></span>
        <span class="role-badge" id="top-role-badge"></span>
        <button id="btn-identity-toggle" class="btn-identity-toggle" title="Hide your identity">Hide</button>
      </div>
    </div>

    <!-- Phase content â€” swapped out by JS -->
    <div id="phase-content"></div>

    <!-- Host control bar (only shown for host) -->
    <div id="host-bar" class="host-bar hidden">
      <div class="host-bar-label">ğŸ‘‘ HOST CONTROLS</div>
      <div id="host-controls"></div>
    </div>

  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       NOTIFICATION TOAST
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="toast" class="toast hidden"></div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TIP JAR â€” persistent, always visible at bottom
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="tip-jar-bar" class="tip-jar-bar">
    <button class="how-to-play-btn" id="btn-how-to-play">â“ How to Play</button>
    <a href="https://buymeacoffee.com/tree23" target="_blank" rel="noopener" class="tip-jar-link">
      â˜• <span class="tip-jar-text">Buy me a coffee</span>
    </a>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HOW TO PLAY MODAL
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="rules-modal-overlay" class="rules-modal-overlay hidden">
    <div class="rules-modal">
      <div class="rules-modal-header">
        <h2 class="rules-modal-title">ğŸ“– How to Play</h2>
        <button class="rules-modal-close" id="btn-rules-close" aria-label="Close">âœ•</button>
      </div>
      <div class="rules-modal-body">

        <div class="rules-section">
          <h3 class="rules-section-title">ğŸ¯ The Goal</h3>
          <div class="rules-role-cards">
            <div class="rules-role-card rules-role-bad">
              <div class="rules-role-label">THE INSIDERS</div>
              <div class="rules-role-desc">Secretly eliminate the others and survive to the end.</div>
            </div>
            <div class="rules-role-card rules-role-good">
              <div class="rules-role-label">THE INNOCENTS</div>
              <div class="rules-role-desc">Find and banish every Insider before they take over.</div>
            </div>
          </div>
        </div>

        <div class="rules-section">
          <h3 class="rules-section-title">ğŸ”‘ Setup</h3>
          <ul class="rules-list">
            <li>4â€“20 players join with the same game code.</li>
            <li>The host chooses how many Insiders (usually 2â€“3).</li>
            <li><strong>Insiders know each other's identities.</strong> Innocents know nothing.</li>
            <li>Everyone else is an Innocent â€” the majority team.</li>
          </ul>
        </div>

        <div class="rules-section">
          <h3 class="rules-section-title">ğŸ”„ Each Round</h3>
          <ol class="rules-list rules-list-ordered">
            <li><strong>Night</strong> â€” Insiders secretly pick one player to eliminate. All Insiders must agree on the same target and lock in.</li>
            <li><strong>Morning</strong> â€” Players check who showed up. A missing player was eliminated in the night. Their role is <em>not</em> revealed.</li>
            <li><strong>Discussion</strong> â€” Everyone debates, accuses, and defends. Insiders must blend in and mislead.</li>
            <li><strong>Banishment Vote</strong> â€” All living players vote to banish someone. Most votes loses. The banished player's role <strong>is revealed</strong> after a dramatic countdown.</li>
          </ol>
        </div>

        <div class="rules-section">
          <h3 class="rules-section-title">ğŸ¤ Recruitment</h3>
          <ul class="rules-list">
            <li>When an Insider is banished, the remaining Insiders may get a <strong>one-time chance</strong> to recruit an Innocent to their side during the next night.</li>
            <li>If there is only <strong>one Insider left</strong> with 5 or more players remaining, they <strong>must</strong> recruit instead of eliminating.</li>
            <li>A recruited player immediately becomes an Insider and learns who the other Insiders are.</li>
          </ul>
        </div>

        <div class="rules-section">
          <h3 class="rules-section-title">ğŸ End Game</h3>
          <ul class="rules-list">
            <li>When 5 or fewer players remain, the host can trigger an <strong>End Game Vote</strong>.</li>
            <li>If <em>all</em> players unanimously vote to end the game, it ends immediately â€” Insiders win if any survive.</li>
            <li>If even one player votes to keep banishing, the game continues with another round.</li>
            <li><strong>Innocents win</strong> if every Insider is banished.</li>
            <li><strong>Insiders win</strong> if at least one Insider is still alive when the game ends.</li>
          </ul>
        </div>

        <div class="rules-section">
          <h3 class="rules-section-title">ğŸ’¡ Tips</h3>
          <ul class="rules-list">
            <li>Innocents: pay attention to who pushes suspicion onto others and who deflects.</li>
            <li>Insiders: act like an Innocent â€” vote strategically to avoid drawing suspicion.</li>
            <li>Runoff votes happen if there's a tie. A second tie lets the host break it.</li>
          </ul>
        </div>

      </div>
      <div class="rules-modal-footer">
        <button class="btn btn-primary" id="btn-rules-dismiss">Got it â€” Back to the Game</button>
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       GAME-OVER TIP MODAL
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div id="tip-modal-overlay" class="tip-modal-overlay hidden">
    <div class="tip-modal">
      <button class="tip-modal-close" id="tip-modal-close" aria-label="Close">âœ•</button>
      <div class="tip-modal-icon" id="tip-modal-icon">â˜•</div>
      <div class="tip-modal-title" id="tip-modal-title">Had a good time?</div>
      <p class="tip-modal-body" id="tip-modal-body">
        This game is free and made with â¤ï¸.<br>If you enjoyed it, a small tip means the world!
      </p>
      <a href="https://buymeacoffee.com/tree23" target="_blank" rel="noopener" class="btn tip-modal-btn">
        â˜• Buy me a coffee
      </a>
      <p class="tip-modal-disclaimer">100% optional Â· no account needed</p>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/client.js"></script>
</body>
</html>
